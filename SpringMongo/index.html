<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Spring MongoDb - AD - Accés a Dades</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/extra.css" rel="stylesheet" />
        <link href="../img/favicon.ico" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Spring MongoDb";
        var mkdocs_page_input_path = "SpringMongo.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../assets/logocaminas.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">UD 8. Componentes</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Spring/">1 - Spring</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Anotaciones/">2 - Anotaciones</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SpringBoot/">3 - SpringBoot</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SpringMVC/">4 - Spring MVC</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SpringData/">5 - Spring Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Docker/">6 - Docker</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">AD - Accés a Dades</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Spring MongoDb</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="spring-mongodb">Spring MongoDb</h1>
<p>Spring MongoDb Es un módulo de Spring Data que facilita la integración de aplicaciones Spring con MongoDB. Además proporciona una abstracción sobre las operaciones básicas de MongoDB como CRUD, consultas personalizadas, y soporte para agregaciones.</p>
<p><strong class="azul">Requisitos</strong></p>
<p>Tener MongoDB instalado o utilizar una instancia en la nube o en un contenedor Docker.</p>
<p>Spring Boot configurado con Maven (en nuestro caso) o Gradle.</p>
<p><strong class="azul">Dependencias Maven</strong></p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p><strong class="azul">application.properties</strong></p>
<pre><code>spring.data.mongodb.host=localhost
spring.data.mongodb.port=27017
spring.data.mongodb.database=nombre_base_de_datos
</code></pre>
<p>Si estás usando MongoDB con autenticación, añade:</p>
<pre><code>spring.data.mongodb.username=usuario
spring.data.mongodb.password=contraseña
</code></pre>
<h2 id="ejemplo-menus">Ejemplo: Menús</h2>
<p>En este ejemplo partiremos de un archivo json con 10 menús y sus correspondientes platos. Has de añadir este documento como una colección a tu BD Mongo.</p>
<p><strong>Archivo json con los menus:</strong></p>
<pre><code>[
{
    "_id": "1",
    "nombre": "Menú Mediterráneo",
    "descripcion": "Un menú saludable inspirado en la dieta mediterránea.",
    "fecha": "2025-01-08",
    "platos": [
    {
        "nombre": "Ensalada Griega",
        "categoria": "Entrante",
        "ingredientes": ["Lechuga", "Tomate", "Pepino", "Aceitunas", "Queso Feta"],
        "precio": 5.5
    },
    {
        "nombre": "Moussaka",
        "categoria": "Principal",
        "ingredientes": ["Berenjena", "Carne de Cordero", "Tomate", "Bechamel", "Queso"],
        "precio": 12.0
    }
    ],
    "precioTotal": 17.5
},
{
    "_id": "2",
    "nombre": "Menú Asiático",
    "descripcion": "Sabores frescos y auténticos de Asia.",
    "fecha": "2025-01-09",
    "platos": [
    {
        "nombre": "Rollitos de Primavera",
        "categoria": "Entrante",
        "ingredientes": ["Zanahoria", "Col", "Brotes de Soja", "Fideos de Arroz"],
        "precio": 4.0
    },
    {
        "nombre": "Pad Thai",
        "categoria": "Principal",
        "ingredientes": ["Fideos de Arroz", "Camarones", "Tofu", "Maní"],
        "precio": 10.0
    }
    ],
    "precioTotal": 14.0
},
{
    "_id": "3",
    "nombre": "Menú Vegetariano",
    "descripcion": "Opciones deliciosas sin carne.",
    "fecha": "2025-01-10",
    "platos": [
    {
        "nombre": "Hummus con Pan de Pita",
        "categoria": "Entrante",
        "ingredientes": ["Garbanzos", "Tahini", "Limón", "Ajo"],
        "precio": 4.5
    },
    {
        "nombre": "Lasaña Vegetariana",
        "categoria": "Principal",
        "ingredientes": ["Pasta", "Espinacas", "Ricotta", "Tomate"],
        "precio": 9.0
    }
    ],
    "precioTotal": 13.5
},
{
    "_id": "4",
    "nombre": "Menú Italiano",
    "descripcion": "Especialidades clásicas de Italia.",
    "fecha": "2025-01-11",
    "platos": [
    {
        "nombre": "Bruschetta",
        "categoria": "Entrante",
        "ingredientes": ["Pan", "Tomate", "Albahaca", "Aceite de Oliva"],
        "precio": 5.0
    },
    {
        "nombre": "Pizza Margarita",
        "categoria": "Principal",
        "ingredientes": ["Masa de Pizza", "Tomate", "Mozzarella", "Albahaca"],
        "precio": 10.0
    }
    ],
    "precioTotal": 15.0
},
{
    "_id": "5",
    "nombre": "Menú Mexicano",
    "descripcion": "Platos picantes y llenos de sabor.",
    "fecha": "2025-01-12",
    "platos": [
    {
        "nombre": "Guacamole con Totopos",
        "categoria": "Entrante",
        "ingredientes": ["Aguacate", "Limón", "Cilantro", "Totopos"],
        "precio": 4.5
    },
    {
        "nombre": "Tacos al Pastor",
        "categoria": "Principal",
        "ingredientes": ["Tortilla", "Carne de Cerdo", "Piña", "Cebolla"],
        "precio": 9.0
    }
    ],
    "precioTotal": 13.5
},
{
    "_id": "6",
    "nombre": "Menú Americano",
    "descripcion": "Comida clásica de los Estados Unidos.",
    "fecha": "2025-01-13",
    "platos": [
    {
        "nombre": "Alitas de Pollo",
        "categoria": "Entrante",
        "ingredientes": ["Pollo", "Salsa BBQ", "Especias"],
        "precio": 6.0
    },
    {
        "nombre": "Hamburguesa con Queso",
        "categoria": "Principal",
        "ingredientes": ["Pan", "Carne de Res", "Queso", "Lechuga"],
        "precio": 10.0
    }
    ],
    "precioTotal": 16.0
},
{
    "_id": "7",
    "nombre": "Menú de Mariscos",
    "descripcion": "Frescos sabores del océano.",
    "fecha": "2025-01-14",
    "platos": [
    {
        "nombre": "Cóctel de Camarones",
        "categoria": "Entrante",
        "ingredientes": ["Camarones", "Salsa Cóctel", "Limón"],
        "precio": 7.0
    },
    {
        "nombre": "Paella de Mariscos",
        "categoria": "Principal",
        "ingredientes": ["Arroz", "Camarones", "Mejillones", "Calamares"],
        "precio": 12.0
    }
    ],
    "precioTotal": 19.0
},
{
    "_id": "8",
    "nombre": "Menú Francés",
    "descripcion": "Platos refinados y elegantes.",
    "fecha": "2025-01-15",
    "platos": [
    {
        "nombre": "Quiche Lorraine",
        "categoria": "Entrante",
        "ingredientes": ["Huevo", "Nata", "Tocino", "Queso Gruyère"],
        "precio": 6.5
    },
    {
        "nombre": "Ratatouille",
        "categoria": "Principal",
        "ingredientes": ["Berenjena", "Calabacín", "Tomate", "Pimiento"],
        "precio": 9.5
    }
    ],
    "precioTotal": 16.0
},
{
    "_id": "9",
    "nombre": "Menú Indio",
    "descripcion": "Sabores especiados y exóticos.",
    "fecha": "2025-01-16",
    "platos": [
    {
        "nombre": "Samosas",
        "categoria": "Entrante",
        "ingredientes": ["Papas", "Especias", "Masa Frita"],
        "precio": 4.0
    },
    {
        "nombre": "Pollo Tikka Masala",
        "categoria": "Principal",
        "ingredientes": ["Pollo", "Salsa de Tomate", "Especias", "Crema"],
        "precio": 11.0
    }
    ],
    "precioTotal": 15.0
},
{
    "_id": "10",
    "nombre": "Menú Japonés",
    "descripcion": "Delicados sabores de Japón.",
    "fecha": "2025-01-17",
    "platos": [
    {
        "nombre": "Sopa de Miso",
        "categoria": "Entrante",
        "ingredientes": ["Miso", "Tofu", "Alga Wakame"],
        "precio": 3.5
    },
    {
        "nombre": "Sushi Variado",
        "categoria": "Principal",
        "ingredientes": ["Arroz", "Pescado", "Alga Nori", "Vegetales"],
        "precio": 12.5
    }
    ],
    "precioTotal": 16.0
}
]
</code></pre>
<p><strong class="azul">Modelo MVC</strong></p>
<p><strong class="verde">Modelo</strong></p>
<p>Los modelos son las clases que representan las colecciones en MongoDB. Deben incluir la anotación <strong>@Document</strong>.</p>
<p><strong>Menu.kt</strong></p>
<pre><code>import org.springframework.data.annotation.Id
import org.springframework.data.mongodb.core.mapping.Document

@Document(collection = "menus") // Nombre de la colección en MongoDB
data class Menu(
    @Id
    val id: String, // Identificador único del menú
    val nombre: String, // Nombre del menú
    val descripcion: String, // Descripción del menú
    val fecha: String, // Fecha asociada al menú
    val platos: List&lt;Plato&gt; = emptyList(), // Lista de platos
    val precioTotal: Double = 0.0 // Precio total del menú
)

data class Plato(
    val nombre: String,
    val categoria: String,
    val ingredientes: List&lt;String&gt; = emptyList(),
    val precio: Double = 0.0
)
</code></pre>
<p><strong class="verde">Repositorios</strong></p>
<p>proporciona una interfaz MongoRepository que simplifica las operaciones CRUD.</p>
<p><strong>MenuRepository.kt</strong></p>
<p>import org.springframework.data.mongodb.repository.MongoRepository
import org.springframework.stereotype.Repository
import org.example.primerspringmongo.model.*</p>
<pre><code>@Repository
interface MenuRepository : MongoRepository&lt;Menu, String&gt; {
    fun findByNombre(nombre: String): List&lt;Menu&gt;
    fun findByPlatosCategoria(categoria: String): List&lt;Menu&gt;

}
</code></pre>
<p><strong class="verde">Controlador</strong></p>
<p><strong>MenuController.kt</strong></p>
<pre><code>import org.example.primerspringmongo.model.Menu
import org.example.primerspringmongo.repository.MenuRepository
import org.springframework.stereotype.Controller
import org.springframework.ui.Model
import org.springframework.web.bind.annotation.*

@Controller
@RequestMapping("/menus")
class MenuController(private val menuRepository: MenuRepository) {

    // Listar todos los menús
    @GetMapping
    fun listarMenus(model: Model): String {
        val menus = menuRepository.findAll()
        model.addAttribute("menus", menus)
        return "menus/listar"
    }

    @GetMapping("/buscar")
    fun buscarPorNombre(@RequestParam nombre: String, model: Model): String {
        val menus = menuRepository.findByNombre(nombre) // Consulta en el repositorio
        model.addAttribute("menus", menus) // Pasar los menús al modelo
        model.addAttribute("nombre", nombre) // Pasar el nombre buscado
        return "menus/listar" // Nombre de la plantilla Thymeleaf
    }

    // Guardar un nuevo menú
    @PostMapping("/guardar")
    fun guardarMenu(@ModelAttribute menu: Menu): String {
        menuRepository.save(menu)
        return "redirect:/menus"
    }

    // Ver detalles de un menú
    @GetMapping("/{id}")
    fun verDetalles(@PathVariable id: String, model: Model): String {
        val menu = menuRepository.findById(id)
        if (menu.isPresent) {
            model.addAttribute("menu", menu.get())
            return "menus/detalles"
        }
        return "redirect:/menus"
    }

    // Mostrar formulario para editar un menú
    @GetMapping("/editar/{id}")
    fun mostrarFormularioEditar(@PathVariable id: String, model: Model): String {
        val menu = menuRepository.findById(id)
        if (menu.isPresent) {
            model.addAttribute("menu", menu.get())
            return "menus/editar"
        }
        return "redirect:/menus"
    }

    // Actualizar un menú existente
    @PostMapping("/actualizar/{id}")
    fun actualizarMenu(@PathVariable id: String, @ModelAttribute menu: Menu): String {
        if (menuRepository.existsById(id)) {
            menuRepository.save(menu)
        }
        return "redirect:/menus"
    }

    // Eliminar un menú
    @GetMapping("/eliminar/{id}")
    fun eliminarMenu(@PathVariable id: String): String {
        menuRepository.deleteById(id)
        return "redirect:/menus"
    }
}
</code></pre>
<p><strong>PlatoController.kt</strong></p>
<pre><code>import org.example.primerspringmongo.repository.MenuRepository
import org.springframework.stereotype.Controller
import org.springframework.ui.Model
import org.springframework.web.bind.annotation.*

@Controller
@RequestMapping("/platos")
class PlatoController(private val menuRepository: MenuRepository) {

    // Listar todos los platos de un menú
    @GetMapping("/{menuId}")
    fun listarPlatos(@PathVariable menuId: String, model: Model): String {
        val menu = menuRepository.findById(menuId)
        if (menu.isPresent) {
            model.addAttribute("menu", menu.get())
            model.addAttribute("platos", menu.get().platos)
            return "platos/listar"
        }
        return "redirect:/menus"
    }

    @GetMapping("/categoria")
    fun buscarPorCategoria(@RequestParam categoria: String, model: Model): String {
        val menus = menuRepository.findByPlatosCategoria(categoria) // Consulta en el repositorio
        model.addAttribute("menus", menus) // Lista de menús encontrados
        model.addAttribute("categoriaBuscada", categoria) // Categoría buscada
        return "platos/buscarPorCategoria" // Plantilla Thymeleaf
    }

    @GetMapping("/{menuId}/ingredientes/{platoNombre}")
    fun verIngredientes(
        @PathVariable menuId: String,
        @PathVariable platoNombre: String,
        model: Model
    ): String {
        val menu = menuRepository.findById(menuId)
        if (menu.isPresent) {
            val plato = menu.get().platos.find { it.nombre == platoNombre }
            if (plato != null) {
                println("Plato encontrado: $plato")
                println("Ingredientes: ${plato.ingredientes}")
                model.addAttribute("menu", menu.get())
                model.addAttribute("plato", plato)
                model.addAttribute("ingredientes", plato.ingredientes ?: emptyList&lt;String&gt;())
                return "platos/ingredientes"
            }
        }
        model.addAttribute("error", "El plato o el menú no existen.")
        return "error"
    }

}
</code></pre>
<p><strong class="verde">Vista</strong>   </p>
<p>templates/menus/</p>
<p><strong>listar.html</strong></p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;title&gt;Lista de Menús&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Lista de Menús&lt;/h1&gt;
&lt;a href="/menus/crear"&gt;Crear Nuevo Menú&lt;/a&gt;
&lt;table border="1"&gt;
&lt;thead&gt;
&lt;tr&gt;
    &lt;th&gt;Nombre&lt;/th&gt;
    &lt;th&gt;Descripción&lt;/th&gt;
    &lt;th&gt;Acciones&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr th:each="menu : ${menus}"&gt;
    &lt;td th:text="${menu.nombre}"&gt;&lt;/td&gt;
    &lt;td th:text="${menu.descripcion}"&gt;&lt;/td&gt;
    &lt;td&gt;
    &lt;a th:href="@{'/menus/' + ${menu.id}}"&gt;Detalles&lt;/a&gt;
    &lt;a th:href="@{'/menus/editar/' + ${menu.id}}"&gt;Editar&lt;/a&gt;
    &lt;a th:href="@{'/menus/eliminar/' + ${menu.id}}" onclick="return confirm('¿Seguro que quieres eliminar este menú?')"&gt;Eliminar&lt;/a&gt;
    &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><strong>crear.html</strong></p>
<pre><code>    &lt;!DOCTYPE html&gt;
    &lt;html xmlns:th="http://www.thymeleaf.org"&gt;
    &lt;head&gt;
        &lt;title&gt;Crear/Editar Menú&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;h1 th:text="${#strings.equals(menu.id, '') ? 'Crear Nuevo Menú' : 'Editar Menú'}"&gt;&lt;/h1&gt;
    &lt;form th:action="@{${#strings.equals(menu.id, '') ? '/menus/guardar' : '/menus/actualizar/' + menu.id}}" th:object="${menu}" method="post"&gt;
        &lt;label for="nombre"&gt;Nombre:&lt;/label&gt;
        &lt;input type="text" id="nombre" name="nombre" th:value="${menu.nombre}" required&gt;&lt;br&gt;

        &lt;label for="descripcion"&gt;Descripción:&lt;/label&gt;
        &lt;textarea id="descripcion" name="descripcion" th:text="${menu.descripcion}" required&gt;&lt;/textarea&gt;&lt;br&gt;

        &lt;label for="fecha"&gt;Fecha:&lt;/label&gt;
        &lt;input type="date" id="fecha" name="fecha" th:value="${menu.fecha}" required&gt;&lt;br&gt;

        &lt;label for="precioTotal"&gt;Precio Total:&lt;/label&gt;
        &lt;input type="number" id="precioTotal" name="precioTotal" th:value="${menu.precioTotal}" step="0.01" required&gt;&lt;br&gt;

        &lt;button type="submit"&gt;Guardar&lt;/button&gt;
        &lt;a href="/menus"&gt;Cancelar&lt;/a&gt;
    &lt;/form&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre>
<p><strong>detalles.html</strong></p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;title&gt;Detalles del Menú&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Detalles del Menú&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;Nombre:&lt;/strong&gt; &lt;span th:text="${menu.nombre}"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Descripción:&lt;/strong&gt; &lt;span th:text="${menu.descripcion}"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Fecha:&lt;/strong&gt; &lt;span th:text="${menu.fecha}"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Precio Total:&lt;/strong&gt; &lt;span th:text="${menu.precioTotal}"&gt;&lt;/span&gt;&lt;/p&gt;

&lt;h2&gt;Platos&lt;/h2&gt;
&lt;ul&gt;
    &lt;li th:each="plato : ${menu.platos}"&gt;
        &lt;strong th:text="${plato.nombre}"&gt;&lt;/strong&gt; - &lt;span th:text="${plato.categoria}"&gt;&lt;/span&gt;
        (&lt;span th:text="${plato.precio}"&gt;&lt;/span&gt; €)
    &lt;/li&gt;
&lt;/ul&gt;
&lt;a href="/menus"&gt;Volver&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><strong>editar.html</strong></p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;title&gt;Crear/Editar Menú&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 th:text="${#strings.equals(menu.id, '') ? 'Crear Nuevo Menú' : 'Editar Menú'}"&gt;&lt;/h1&gt;
&lt;form th:action="@{${#strings.equals(menu.id, '') ? '/menus/guardar' : '/menus/actualizar/' + menu.id}}" th:object="${menu}" method="post"&gt;
&lt;label for="nombre"&gt;Nombre:&lt;/label&gt;
&lt;input type="text" id="nombre" name="nombre" th:value="${menu.nombre}" required&gt;&lt;br&gt;

&lt;label for="descripcion"&gt;Descripción:&lt;/label&gt;
&lt;textarea id="descripcion" name="descripcion" th:text="${menu.descripcion}" required&gt;&lt;/textarea&gt;&lt;br&gt;

&lt;label for="fecha"&gt;Fecha:&lt;/label&gt;
&lt;input type="date" id="fecha" name="fecha" th:value="${menu.fecha}" required&gt;&lt;br&gt;

&lt;label for="precioTotal"&gt;Precio Total:&lt;/label&gt;
&lt;input type="number" id="precioTotal" name="precioTotal" th:value="${menu.precioTotal}" step="0.01" required&gt;&lt;br&gt;

&lt;button type="submit"&gt;Guardar&lt;/button&gt;
&lt;a href="/menus"&gt;Cancelar&lt;/a&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><strong>templates/platos/</strong></p>
<p><strong>listar.kt</strong></p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;title&gt;Platos del Menú&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 th:text="'Platos del Menú: ' + ${menu.nombre}"&gt;&lt;/h1&gt;
&lt;a th:href="@{/menus}"&gt;Volver a Menús&lt;/a&gt;
&lt;table border="1"&gt;
    &lt;thead&gt;
    &lt;tr&gt;
        &lt;th&gt;Nombre&lt;/th&gt;
        &lt;th&gt;Categoría&lt;/th&gt;
        &lt;th&gt;Precio&lt;/th&gt;
        &lt;th&gt;Ingredientes&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
    &lt;tr th:each="plato : ${platos}"&gt;
        &lt;td th:text="${plato.nombre}"&gt;&lt;/td&gt;
        &lt;td th:text="${plato.categoria}"&gt;&lt;/td&gt;
        &lt;td th:text="${plato.precio} + ' €'"&gt;&lt;/td&gt;
        &lt;td&gt;
            &lt;a th:href="@{'/platos/' + ${menu.id} + '/ingredientes/' + ${plato.nombre}}"&gt;Ver Ingredientes&lt;/a&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><strong>ingredientes.html</strong></p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;title&gt;Ingredientes&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1 th:text="'Ingredientes del plato: ' + ${plato?.nombre}"&gt;&lt;/h1&gt;

&lt;div th:if="${error}"&gt;
    &lt;p th:text="${error}" style="color: red;"&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;ul th:if="${ingredientes != null &amp;&amp; !ingredientes.isEmpty()}"&gt;
    &lt;li th:each="ingrediente : ${ingredientes}" th:text="${ingrediente}"&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p th:if="${ingredientes == null || ingredientes.isEmpty()}" style="color: gray;"&gt;
    No hay ingredientes disponibles para este plato.
&lt;/p&gt;

&lt;a th:href="@{'/platos/' + ${menu.id}}"&gt;Volver a los platos&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><strong>buscarPorCategoria.html</strong></p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;title&gt;Buscar Menús por Categoría&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Resultados para categoría: &lt;span th:text="${categoriaBuscada}"&gt;&lt;/span&gt;&lt;/h1&gt;

&lt;table border="1" th:if="${menus}"&gt;
&lt;thead&gt;
&lt;tr&gt;
    &lt;th&gt;ID&lt;/th&gt;
    &lt;th&gt;Nombre&lt;/th&gt;
    &lt;th&gt;Descripción&lt;/th&gt;
    &lt;th&gt;Platos&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr th:each="menu : ${menus}"&gt;
    &lt;td th:text="${menu.id}"&gt;&lt;/td&gt;
    &lt;td th:text="${menu.nombre}"&gt;&lt;/td&gt;
    &lt;td th:text="${menu.descripcion}"&gt;&lt;/td&gt;
    &lt;td&gt;
    &lt;ul&gt;
        &lt;li th:each="plato : ${menu.platos}" th:if="${plato.categoria == categoriaBuscada}" th:text="${plato.nombre}"&gt;&lt;/li&gt;
    &lt;/ul&gt;
    &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p th:if="${menus == null || menus.isEmpty()}" style="color: gray;"&gt;
No se encontraron menús con platos de la categoría &lt;span th:text="${categoriaBuscada}"&gt;&lt;/span&gt;.
&lt;/p&gt;

&lt;a href="/menus"&gt;Volver a la lista de menús&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
